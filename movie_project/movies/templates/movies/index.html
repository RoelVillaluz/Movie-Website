{% extends 'movies/layout.html' %}

{% block body %}
    <!-- Hero Section -->
    <section class="hero">
        <div class="featured-movie">
            <img src="media/media/backdrop_VyAOcwH.jpg" alt="">
            <div class="text">
                <h1 id="movie-title">Spider-Man</h1>
                <h3 id="movie-subtitle">Across the Spiderverse</h3>
                <div class="featured-buttons">
                    <a href="movies/155" id="movie-link" class="movie-link">View Details</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Popular Movies Section -->
    <section class="movie-list">
        <h3 class="marker">Popular Movies</h3>
        <div class="swiper mySwiper">
            <div class="swiper-wrapper">
                {% for movie in popular_movies %}
                <div class="swiper-slide index-swiper-slide">
                    <a href="{% url 'movie-detail' movie.pk %}">
                        <img src="{{ movie.poster_path.url }}" alt="{{ movie.title }}">
                        <i class="fa-solid fa-eye"></i>
                    </a>
                </div>
                {% endfor %}
            </div>
        </div>
    </section>

    <!-- Movies and TV Section -->
    <section class="movies-and-tv">
        <h1 class="marker hidden">Movies and Tv</h1>
        <div class="wrapper">
            <div class="image hidden">
                <a href="{% url 'movie-list' %}">
                    <img src="{{ random_movie.backdrop_path.url }}" alt="">
                </a>
                <div class="circle-label">
                    <h3>Movies</h3>
                </div>
                <div class="overlay">
                    <h2>{{ random_movie.title }}</h2>
                    <div class="details">
                        {% if random_movie.genres %}
                            <p>{{ random_movie.genres.first }}</p>
                        {% endif %}
                        <p><i class="fa-solid fa-star"></i>{{ random_movie.avg_rating|floatformat:2 }}</p>
                    </div>
                </div>
            </div>
            <div class="image hidden">
                <img src="media/media/breaking bad.jpg" alt="">
                <div class="circle-label">
                    <h3>TV Series</h3>
                </div>
                <div class="overlay">
                    <h2>Breaking Bad</h2>
                    <div class="details">
                        <p>Action</p>
                        <p><i class="fa-solid fa-star"></i>9.5</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- New Movies Section -->
    <section class="movie-list">
        <h3 class="marker">New Movies</h3>
        <div class="swiper mySwiper">
            <div class="swiper-wrapper">
                {% for movie in new_movies %}
                <div class="swiper-slide index-swiper-slide">
                    <a href="{% url 'movie-detail' movie.pk %}">
                        <img src="{{ movie.poster_path.url }}" alt="{{ movie.title }}">
                        <i class="fa-solid fa-eye"></i>
                    </a>
                </div>
                {% endfor %}
            </div>
        </div>
    </section>

    <!-- Just Added Section -->
    <section class="movie-list">
        <h3 class="marker">Just Added</h3>
        <div class="swiper mySwiper">
            <div class="swiper-wrapper">
                {% for movie in just_added %}
                <div class="swiper-slide index-swiper-slide"> 
                    <a href="{% url 'movie-detail' movie.pk %}">
                        <img src="{{ movie.poster_path.url }}" alt="{{ movie.title }}">
                        <i class="fa-solid fa-eye"></i>
                    </a>
                </div>
                {% endfor %}
            </div>            
        </div>
    </section>

    <!-- Popular Genres Section -->
    <section class="popular-genres">
        <h3 class="marker hidden">Popular Genres</h3>
        <div class="genre-list">
            {% for genre, genre_info in genre_dict.items %}
                <div class="genre-card hidden">
                    <a href="{% url 'genre-detail' genre_info.2 %}"> 
                        <img src="{{ genre_info.1}}" alt="">
                    </a>
                    <div class="genre-overlay">
                        <h3>{{ genre_info.0 }}</h3> 
                    </div>
                </div>
            {% endfor %}
        </div>
    </section>

    <!-- Award-Winning Movies Section -->
    <section class="award-winning">
        <h1 class="marker hidden" style="margin-left: 30px">Award Winning Movies</h1>
        <div class="wrapper">
            <div class="main-image">
                <img src="media/movie_images/oppenheimer-look9.jpg" alt="">
                <div class="overlay">
                    <h1>Award Winning Movies</h1>
                    <p>Discover top films celebrated globally for their excellence</p>
                    <div class="link">
                        <a href="">View Movies</a>
                    </div>
                </div>
            </div>
        </div>
    </section>
{% endblock %}